---
interface Work {
  jobUrl: string | URL | null | undefined;
  name: string;
  position: string;
  startDate: string;
  endDate: string;
  summary: string[];
  summaryTitle: string;
}

interface Props {
  work: Work[];
}

const { work } = Astro.props;
---

<section>
  <h3
    class="text-lg font-bold uppercase tracking-widest text-[var(--color-accent)] mb-2.5 font-heading"
  >
    Experiencia
  </h3>

  <div class="space-y-4 relative border-l-2 border-[color:rgba(158,185,255,0.35)] ml-1 pl-6 py-1">
    {
      work.map((job) => (
        <div class="relative group">
          <!-- Dot on timeline -->
          <div class="absolute -left-[32.5px] top-1 w-4 h-4 rounded-full bg-[var(--color-accent)] border-[3px] border-[var(--color-card-border)] group-hover:bg-[var(--color-accent-soft)] transition-colors"></div>
          
          <div class="flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-2.5 mb-1">
            <h4 class="text-sm font-bold uppercase font-heading text-white">
              {job.position}
            </h4>
            <span class="text-white/60 font-light whitespace-nowrap font-heading text-xs">
              {job.startDate} - {job.endDate}
            </span>
          </div>
          
          <div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-2">
            <div class="text-white/80 text-xs font-medium">{job.name}</div>
            <span class="hidden sm:inline text-white/50 text-xs">â€¢</span>
            <div class="text-white/70 text-xs">
              <a
                href={`https://${job.jobUrl}`}
                target="_blank"
                rel="noopener noreferrer"
                class="hover:text-[var(--color-accent)] transition-colors"
              >
                {job.jobUrl}
              </a>
            </div>
          </div>

          <div class="bg-white/5 rounded-lg p-2 border border-white/10">
            <div class="flex items-start gap-2 text-white/90 mb-1">
              <p class="font-semibold leading-tight text-xs">
                {job.summaryTitle}
              </p>
            </div>
            <ul class="text-white/70 text-xs leading-snug space-y-0.5 list-disc list-outside ml-4 marker:text-[rgba(158,185,255,0.6)]">
              {job.summary.map(item => <li class="pl-1">{item}</li>)}
            </ul>
          </div>
        </div>
      ))
    }
  </div>
</section>
